# 短信服务

Tags:  sunisco owl sms 

---

##注册
*发送请求*
```http
POST http://192.168.8.103:8080/partner?
code=eeir&
name=name&
proposer=lanxe&
tel=13599917182&
description=eeir-uat
```

说明：
code：用于发送短信的唯一标识
name：显示的名称
proposer：申请人
tel：联系电话
description：简要描述

*返回结果*
```json
{
    "id": "402888e74e4db285014e4dd71a5c0000",
    "version": 1,
    "createdBy": "lanxe",
    "createdDate": 1435825019437,
    "lastModifiedBy": "lanxe",
    "lastModifiedDate": 1435825019469,
    "name": "eeir",
    "code": "eeir",
    "appkey": "8e0f58f3b0a74038a84f48396480d674",
    "tel": null,
    "description": null,
    "actived": false,
    "privateKey": "8e0f58f3b0a74038a84f48396480d674",
    "links": [
        {
            "rel": "self",
            "href": "http://192.168.8.103:8080/partner/402888e74e4db285014e4dd71a5c0000"
        }
    ]
}
```
*说明*：
code:用于发送短信的唯一标识
privateKey:用于发送短信的密钥

请牢记上面返回link是部分，方便后续查询发送短信的信息，

>"links": [
        {
            "rel": "self",
            "href": "http://192.168.8.103:8080/partner/402888e74e4db285014e4dd71a5c0000"
        }
    ]

##使用

### 1. 添加依赖
pom.xml
```xml
<dependency>
    <groupId>so.inspire.modules</groupId>
    <artifactId>inspireso-sms</artifactId>
    <version>1.0.2</version>
</dependency>
```
### 2. 配置发送短信的对象
sunisco-context.xml
```xml
<bean id="smsSender" class="so.inspire.sms.InternalSmsSender">
    <property name="url" value="http://192.168.8.103:8080/sms/send"/>
    <property name="partner" value="eeir"/>
    <property name="privateKey" value="8e0f58f3b0a74038a84f48396480d674"/>
    <property name="signType" value="MD5"/>
</bean>
```
### 3. 代码
```java
//注入对象
@Inject
private SmsSender smsSender;

// 其他代码...
private void sendSms(String mobile, String conetent){
    //校验手机号码是否合法
    //校验内容是否为空
    //其他校验
    smsSender.send(new SmsMessage(mobile, conetent));
}

//其他代码
```